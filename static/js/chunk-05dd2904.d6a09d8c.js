(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05dd2904"],{5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),r=n("577e"),c=n("5899"),o="["+c+"]",s=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),u=function(e){return function(t){var n=r(a(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(i,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},"68d5":function(e,t,n){"use strict";n("80ef")},7156:function(e,t,n){var a=n("861d"),r=n("d2bb");e.exports=function(e,t,n){var c,o;return r&&"function"==typeof(c=t.constructor)&&c!==n&&a(o=c.prototype)&&o!==n.prototype&&r(e,o),e}},"80ef":function(e,t,n){},"90d7":function(e,t,n){var a=n("23e7"),r=Math.log,c=Math.LN2;a({target:"Math",stat:!0},{log2:function(e){return r(e)/c}})},a339:function(e,t,n){"use strict";n.r(t);n("a9e3");var a=n("7a23"),r=n("ce00"),c=n.n(r),o=n("f5be"),s=n.n(o),i=Object(a["W"])("data-v-7534bc86");Object(a["F"])("data-v-7534bc86");var u={class:"page-box index-box"},l={class:"swap-box"},b={class:"swap"},d=Object(a["m"])("div",{class:"swap-title flex-between"},[Object(a["m"])("div",{class:"text"},"ABDX直接质押"),Object(a["m"])("span",null,"3.6X")],-1),m={class:"swap-input"},f={class:"title flex-between"},p={class:"text"},v=Object(a["l"])("输入"),O={class:"balance"},j=Object(a["m"])("div",{class:"flex-middle right-box"},[Object(a["m"])("img",{src:c.a,alt:""}),Object(a["m"])("span",null,"ABDX")],-1),x=Object(a["m"])("div",{class:"swap-icon"},[Object(a["m"])("img",{src:s.a,alt:""})],-1),g={class:"swap-input"},h=Object(a["m"])("div",{class:"title flex-between"},[Object(a["m"])("div",{class:"text"},"输出 (质押收益)")],-1),w=Object(a["m"])("div",{class:"flex-middle right-box"},[Object(a["m"])("img",{src:c.a,alt:""}),Object(a["m"])("span",null,"ABDX")],-1),I={key:0,class:"intro-box"},C=Object(a["m"])("div",{class:"title"},"填写推荐人",-1),A={class:"flex-middle"},y={class:"btn-box"},k=Object(a["l"])("质押"),N=Object(a["l"])("授权"),B=Object(a["m"])("div",{class:"rule-box"},[Object(a["m"])("div",{class:"title"},"质押规则"),Object(a["m"])("div",{class:"content"},[Object(a["l"])(" 1、ABDX直接进行质押，质押可获取3.6倍的收益， 每天千分之二进行释放，500天释放完毕。"),Object(a["m"])("br"),Object(a["l"])(" 2、同样也可以通过推荐下级进行加速释放。"),Object(a["m"])("br"),Object(a["l"])(" 3、质押规则"),Object(a["m"])("br"),Object(a["l"])(" 第一轮：直接质押和兑换质押，ABDX加起来不能大于 10WABDX"),Object(a["m"])("br"),Object(a["l"])(" 第二轮：第一轮出局之后，才能追加质押到20WABDX"),Object(a["m"])("br"),Object(a["l"])(" 第三轮：第二轮再次出局之后，才能追加质押到 40WABDX"),Object(a["m"])("br"),Object(a["l"])(" 后面轮数，以此类推 ")])],-1);Object(a["D"])();var E=i((function(e,t,n,r,c,o){var s=Object(a["J"])("HeadTop"),E=Object(a["J"])("van-field"),R=Object(a["J"])("van-button");return Object(a["C"])(),Object(a["h"])("div",u,[Object(a["m"])(s,{title:"ABDX直接质押"}),Object(a["m"])("div",l,[Object(a["m"])("div",b,[d,Object(a["m"])("div",m,[Object(a["m"])("div",f,[Object(a["m"])("div",p,[v,Object(a["m"])("span",{class:"total-stake",onClick:t[1]||(t[1]=function(){return e.getTotalBlance&&e.getTotalBlance.apply(e,arguments)})},"全部质押")]),Object(a["m"])("div",O,"余额: "+Object(a["N"])(e.balance),1)]),Object(a["m"])(E,{modelValue:e.amount,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.amount=t}),type:"number",label:"",placeholder:"0.0"},{button:i((function(){return[j]})),_:1},8,["modelValue"])]),x,Object(a["m"])("div",g,[h,Object(a["m"])(E,{modelValue:e.incomeAmount,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.incomeAmount=t}),label:"",readonly:"",placeholder:"0.0"},{button:i((function(){return[w]})),_:1},8,["modelValue"])]),e.userInfo.isExist?Object(a["i"])("",!0):(Object(a["C"])(),Object(a["h"])("div",I,[C,Object(a["m"])("div",A,[Object(a["U"])(Object(a["m"])("input",{class:"flex-item intro","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.userInfo.intro=t}),type:"text",placeholder:"请输入推荐人钱包地址"},null,512),[[a["Q"],e.userInfo.intro]])])])),Object(a["m"])("div",y,[Number(e.allowance)>0?(Object(a["C"])(),Object(a["h"])(R,{key:0,type:"primary",loading:e.btn.loading,size:"large","loading-text":"正在质押...",onClick:e.stake},{default:i((function(){return[k]})),_:1},8,["loading","onClick"])):(Object(a["C"])(),Object(a["h"])(R,{key:1,type:"primary",loading:e.btn.loading,size:"large","loading-text":"正在授权...",onClick:e.approve},{default:i((function(){return[N]})),_:1},8,["loading","onClick"]))])])]),B])})),R=n("5530"),_=n("1da1"),D=(n("96cf"),n("b680"),n("90d7"),n("1a2e")),F=n("6c02"),X=n("47e2"),M=n("5502"),T=n("01ea"),U=n("722f"),V=n("440b"),S=n("9d56");const G="0x0000000000000000000000000000000000000000";var J=n("626a"),L=n("98b3"),W=n("901e"),P=n.n(W),z={components:{HeadTop:D["a"]},setup:function(){var e=Object(M["b"])(),t=Object(F["e"])(),n=Object(X["b"])(),r=n.t,c=Object(a["G"])({$t:r,address:Object(a["f"])((function(){return e.state.accounts[0]})),web3:Object(a["f"])((function(){return e.state.provider})),investContract:null,abdxContract:null,btn:{loading:!1},userInfo:{intro:L["a"].get()||"",isExist:!0,investAmmount:0},amount:"",incomeAmount:Object(a["f"])((function(){return c.amount?Number(3.6*c.amount).toFixed(6):""})),allowance:"",balance:"",rate:"100",staticAmount:"0.00",initContract:function(){c.investContract=new c.web3.eth.Contract(V,T["a"].investAddress),c.abdxContract=new c.web3.eth.Contract(U,T["a"].abdxAddress),c.initData()},initData:function(){c.getUserInfo(),c.getRate(),c.getBalance(),c.getAllowance()},getUserInfo:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.investContract.methods.getUserInfo(c.address).call();case 2:return t=e.sent,e.next=5,c.abdxContract.methods.decimals().call();case 5:return n=e.sent,e.next=8,c.investContract.methods.getUserRecords(c.address).call();case 8:e.sent,c.userInfo.isExist=t.isExist,c.userInfo.isExist&&(c.userInfo.intro=t.intro),c.userInfo.investAmmount=new P.a(t.investAmmount).dividedBy(Math.pow(10,n)).toFixed(2);case 13:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getRate:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.investContract.methods.tokenPrice().call();case 2:t=e.sent,c.rate=new P.a(t).dividedBy(1e4).toFixed();case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getAllowance:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.abdxContract.methods.allowance(c.address,T["a"].investAddress).call();case 2:t=e.sent,c.allowance=t;case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getBalance:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.abdxContract.methods.decimals().call();case 2:return t=e.sent,e.next=5,c.abdxContract.methods.balanceOf(c.address).call();case 5:n=e.sent,c.balance=new P.a(n).dividedBy(Math.pow(10,t)).toFixed(6);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getTotalBlance:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.abdxContract.methods.decimals().call();case 2:return t=e.sent,e.next=5,c.abdxContract.methods.balanceOf(c.address).call();case 5:n=e.sent,c.amount=new P.a(n).dividedBy(Math.pow(10,t)).toFixed(Number(t));case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),approve:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c.btn.loading=!0,e.prev=1,e.next=4,c.abdxContract.methods.approve(T["a"].investAddress,S["a"]).send({from:c.address});case 4:Object(J["a"])("授权成功"),c.getAllowance(),c.btn.loading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),Object(J["a"])("授权失败"),c.btn.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),stake:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c.amount){e.next=3;break}return Object(J["a"])("请先输入数量"),e.abrupt("return");case 3:if(!(Number(c.amount)>Number(c.balance))){e.next=6;break}return Object(J["a"])("余额不足"),e.abrupt("return");case 6:if(!(Number(c.amount)<1e4&&Number(c.userInfo.investAmmount)<=0)){e.next=9;break}return Object(J["a"])("最少质押10000ABDX"),e.abrupt("return");case 9:if(c.userInfo.isExist||""!=c.userInfo.intro&&c.userInfo.intro!=G){e.next=12;break}return Object(J["a"])("请先填写推荐人"),e.abrupt("return");case 12:return e.next=14,c.investContract.methods.getUserInfo(c.userInfo.intro).call();case 14:if(n=e.sent,n.isExist){e.next=18;break}return Object(J["a"])("推荐人无效"),e.abrupt("return");case 18:return e.prev=18,e.next=21,c.abdxContract.methods.decimals().call();case 21:return a=e.sent,r=new P.a(c.amount).multipliedBy(Math.pow(10,a)).toFixed(),e.next=25,c.investContract.methods.userLimit(c.address).call();case 25:return o=e.sent,s=new P.a(o).dividedBy(Math.pow(10,a)).toFixed(),s=Number(s)>0?s:1e5,Math.log2(s>1e5?parseInt(s/1e5):1)+1,c.btn.loading=!0,e.next=32,c.investContract.methods.invest(c.userInfo.intro,r).estimateGas({from:c.address});case 32:return e.sent,e.next=36,c.investContract.methods.invest(c.userInfo.intro,r).send({from:c.address});case 36:c.initData(),c.btn.loading=!1,Object(J["a"])("质押成功"),t.push({name:"RecordInvest"}),e.next=47;break;case 42:e.prev=42,e.t0=e["catch"](18),c.btn.loading=!1,Object(J["a"])("质押失败");case 47:case"end":return e.stop()}}),e,null,[[18,42]])})));function n(){return e.apply(this,arguments)}return n}()});c.address&&c.initContract(),Object(a["S"])((function(){return c.address}),(function(e){e&&c.initContract()}));var o=Object(a["O"])(c);return Object(R["a"])({},o)}};n("68d5");z.render=E,z.__scopeId="data-v-7534bc86";t["default"]=z},a9e3:function(e,t,n){"use strict";var a=n("83ab"),r=n("da84"),c=n("94ca"),o=n("6eeb"),s=n("5135"),i=n("c6b6"),u=n("7156"),l=n("d9b5"),b=n("c04e"),d=n("d039"),m=n("7c73"),f=n("241c").f,p=n("06cf").f,v=n("9bf2").f,O=n("58a8").trim,j="Number",x=r[j],g=x.prototype,h=i(m(g))==j,w=function(e){if(l(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,a,r,c,o,s,i,u=b(e,"number");if("string"==typeof u&&u.length>2)if(u=O(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+u}for(c=u.slice(2),o=c.length,s=0;s<o;s++)if(i=c.charCodeAt(s),i<48||i>r)return NaN;return parseInt(c,a)}return+u};if(c(j,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var I,C=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof C&&(h?d((function(){g.valueOf.call(n)})):i(n)!=j)?u(new x(w(t)),n,C):w(t)},A=a?f(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),y=0;A.length>y;y++)s(x,I=A[y])&&!s(C,I)&&v(C,I,p(x,I));C.prototype=g,g.constructor=C,o(r,j,C)}},ce00:function(e,t,n){e.exports=n.p+"static/img/ABDX_logo.ae3f159c.png"},f5be:function(e,t,n){e.exports=n.p+"static/img/swap_icon.37f21845.png"}}]);
//# sourceMappingURL=chunk-05dd2904.d6a09d8c.js.map