{"version":3,"sources":["webpack:///./src/views/record/bonus/index.vue?4a8c","webpack:///./src/views/record/bonus/index.vue?d5d0","webpack:///./src/views/record/bonus/index.vue","webpack:///./src/views/record/bonus/List.vue","webpack:///./src/views/record/bonus/List.vue?64d7","webpack:///./src/views/record/bonus/index.vue?2619","webpack:///./src/assets/images/checkbox_default@2x.png","webpack:///./src/views/record/bonus/List.vue?c5db","webpack:///./src/views/record/bonus/List.vue?8b59","webpack:///./src/assets/images/checkbox_select@2x.png"],"names":["class","style","cid","title","offset-top","changeHandle","active","type","tabHandle","name","haveBack","refreshing","onRefresh","loading","immediate-check","error","error-text","finished","finished-text","onLoad","list","withdrawCheck","withdraw","btn","loading-text","size","text","checked","checkBoxHandle","item","index","key","toggle","rewordIndex","ref","el","checkboxRefs","icon","src","props","activeIcon","inactiveIcon","user","Number","rewardAmount","tokenDecimls","toFixed","canTake","haveTake","$dateformat","startTime","id","amount","time","Array","default","String","setup","emit","store","t","data","$t","web3","state","provider","address","accounts","abdxContract","investContract","initContract","eth","Contract","investAbi","config","investAddress","abdxAddress","methods","decimals","call","val","refData","render","__scopeId","components","HeadTop","List","router","route","isFixed","page","limit","query","inject","replace","initData","getUserInfo","getIntroLog","getWithdrawLog","userInfo","dividedBy","then","result","push","Math","ceil","total","catch","i","length","getCanGetIntroAmount","from","arr","withdrawIntroRewardAll","send","to","module","exports"],"mappings":"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","file":"static/js/chunk-02016bec.b1568796.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=1&id=b7931f8a&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=b7931f8a&lang=less&scoped=true\"","<template>\r\n  <div class=\"page-box invest-box\" :class=\"{'active':cid === '0'}\">\r\n    <HeadTop title=\"奖金记录\"></HeadTop>\r\n    <div class=\"invest\">\r\n      <div class=\"tab-wrap\">\r\n        <van-sticky :offset-top=\"46\" @change=\"changeHandle\" style=\"margin-bottom:12px;\">\r\n          <van-tabs v-model:active=\"cid\" type=\"card\" @change=\"tabHandle\">\r\n            <van-tab name=\"0\" title=\"待领取\"></van-tab>\r\n            <van-tab name=\"1\" title=\"已领取\"></van-tab>\r\n          </van-tabs>\r\n        </van-sticky>\r\n      </div>\r\n      <div class=\"list-wrap\" :style=\"{paddingBottom: cid == '0' ? '30px' : '0'}\">\r\n        <div v-if=\"cid == '1'\" class=\"tip\">已领取：<span style=\"color:#F01C00\">{{haveBack}} ABDX</span></div>\r\n        <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\r\n          <van-list v-model:loading=\"loading\" :immediate-check=\"false\" v-model:error=\"error\" error-text=\"请求失败，点击重新加载\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n            <List :list=\"list\" :cid=\"cid\" @withdrawCheck=\"withdrawCheck\"></List>\r\n          </van-list>\r\n        </van-pull-refresh>\r\n       \r\n      </div>\r\n    </div>\r\n     <div class=\"btn-box\">\r\n          <van-button @click=\"withdraw\" :loading=\"btn.loading\" loading-text=\"领取中...\" type=\"primary\" size=\"large\">{{btn.text}}</van-button>\r\n        </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport HeadTop from '@/components/HeadTop'\r\nimport BigNumber from 'bignumber.js';\r\nimport { useRouter, useRoute, onBeforeRouteUpdate } from 'vue-router'\r\nimport List from './List'\r\nimport { reactive, toRefs, computed, watch } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport { useStore } from \"vuex\";\r\nimport config from \"@/utils/config\";\r\nimport tokenAbi from \"@/utils/abi\";\r\nimport investAbi from \"@/utils/investAbi\";\r\nimport { getWithdrawLog, getIntroLog } from \"@/api\";\r\nimport { Toast } from 'vant';\r\nexport default {\r\n  components: {\r\n    HeadTop,\r\n    List\r\n  },\r\n  setup () {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const { t } = useI18n()\r\n    const data = reactive({\r\n      $t: t,\r\n      address: computed(() => store.state.accounts[0]),\r\n      web3: computed(() => store.state.provider),\r\n      investContract: null,\r\n      abdxContract: null,\r\n      tokenDecimls: 10 ** 18,\r\n      haveBack: 0,\r\n      isFixed: false,\r\n      list: [],\r\n      page: 1,\r\n      limit: 10,\r\n      loading: false,\r\n      error: false,\r\n      finished: false,\r\n      refreshing: false,\r\n      checked: [],\r\n      btn: {\r\n        text: '快速领取',\r\n        loading: false\r\n      },\r\n      cid: route.query.cid || '0',\r\n      tabHandle: (inject) => {\r\n        router.replace({ name: 'RecordBonus', query: { cid: inject } })\r\n      },\r\n      initContract: async () => {\r\n        data.investContract = new data.web3.eth.Contract(investAbi, config.investAddress)\r\n        data.abdxContract = new data.web3.eth.Contract(tokenAbi, config.abdxAddress)\r\n        data.tokenDecimls = await data.abdxContract.methods.decimals().call()\r\n        data.initData()\r\n      },\r\n      initData: () => {\r\n        data.page = 1\r\n        data.getUserInfo()\r\n        if (data.cid === '0') {\r\n          data.getIntroLog()\r\n        } else {\r\n          data.getWithdrawLog()\r\n        }\r\n      },\r\n      getUserInfo: async () => {\r\n        let userInfo = await data.investContract.methods.getUserInfo(data.address).call()\r\n        let decimals = await data.abdxContract.methods.decimals().call()\r\n        data.haveBack = new BigNumber(userInfo.haveBack).dividedBy(10 ** decimals).toFixed(6)\r\n      },\r\n      getWithdrawLog () {\r\n        getWithdrawLog({ address: data.address, page: data.page, limit: data.limit }).then((result) => {\r\n          if (data.refreshing) {\r\n            data.list = [];\r\n            data.refreshing = false;\r\n          }\r\n          if (data.page === 1) {\r\n            data.list = [];\r\n            data.list = result.data.list\r\n          } else {\r\n            data.list.push(...result.data.list)\r\n          }\r\n          data.loading = false\r\n          data.finished = !(Math.ceil(result.data.total / data.limit) > data.page)\r\n        })\r\n          .catch(() => {\r\n            data.error = true\r\n          })\r\n      },\r\n      getIntroLog () {\r\n        getIntroLog({ address: data.address, page: data.page, limit: data.limit }).then(async (result) => {\r\n          if (data.refreshing) {\r\n            data.list = [];\r\n            data.refreshing = false;\r\n          }\r\n          for (let i = 0; i < result.data.list.length; i++) {\r\n            result.data.list[i].canTake = await data.investContract.methods.getCanGetIntroAmount(result.data.list[i].rewordIndex).call({ from: data.address })\r\n          }\r\n          if (data.page === 1) {\r\n            data.list = result.data.list\r\n          } else {\r\n            data.list.push(...result.data.list)\r\n          }\r\n          data.loading = false\r\n          data.finished = !(Math.ceil(result.data.total / data.limit) > data.page)\r\n        })\r\n          .catch(() => {\r\n            data.error = true\r\n          })\r\n      },\r\n      changeHandle (inject) {\r\n        data.isFixed = inject\r\n      },\r\n      onLoad () {\r\n        data.page++\r\n        if (data.cid === '0') {\r\n          data.getIntroLog()\r\n        } else {\r\n          data.getWithdrawLog()\r\n        }\r\n      },\r\n      onRefresh () {\r\n        data.finished = false;\r\n        // 重新加载数据\r\n        // 将 loading 设置为 true，表示处于加载状态\r\n        data.loading = true;\r\n        data.page = 1\r\n        if (data.cid === '0') {\r\n          data.getIntroLog()\r\n        } else {\r\n          data.getWithdrawLog()\r\n        }\r\n      },\r\n      withdrawCheck (inject) {\r\n        data.checked = inject\r\n      },\r\n      withdraw: async () => {\r\n        data.btn.loading = true;\r\n        let arr = [...data.checked]\r\n        try {\r\n          await data.investContract.methods.withdrawIntroRewardAll(arr).send({ from: data.address })\r\n          Toast('领取成功')\r\n          data.btn.loading = false;\r\n          data.initData()\r\n        } catch (error) {\r\n          data.btn.loading = false;\r\n        }\r\n      },\r\n    })\r\n    if (data.address) {\r\n      data.initContract()\r\n    }\r\n    onBeforeRouteUpdate((to, from) => {\r\n      data.cid = to.query.cid || '0';\r\n      data.page = 1\r\n      data.list = []\r\n      data.loading = false\r\n      data.error = false\r\n      data.finished = false\r\n      data.refreshing = false\r\n      if (data.cid === '0') {\r\n        data.getIntroLog()\r\n      } else {\r\n        data.getWithdrawLog()\r\n      }\r\n    });\r\n    watch(() => data.address, (val) => {\r\n      if (val) {\r\n        data.initContract()\r\n      }\r\n    })\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.invest-box {\r\n  &.active {\r\n    .btn-box {\r\n      display: block;\r\n    }\r\n  }\r\n  min-height: calc(100vh - 46px);\r\n  box-sizing: border-box;\r\n  padding-bottom: 0;\r\n  .btn-box {\r\n    display: none;\r\n  }\r\n  .tip {\r\n    padding: 9px 0 16px;\r\n    line-height: 1.3;\r\n    word-break: break-all;\r\n    font-size: 14px;\r\n    font-weight: 700;\r\n  }\r\n}\r\n.invest {\r\n  padding: 12px 15px;\r\n  min-height: calc(100vh - 46px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  .tab-wrap {\r\n    flex-shrink: 0;\r\n  }\r\n  .list-wrap {\r\n    flex-grow: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    .tip {\r\n      flex-shrink: 0;\r\n    }\r\n    .van-pull-refresh {\r\n      flex-grow: 1;\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n#app .invest-box {\r\n  .btn-box {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    z-index: 10000;\r\n    max-width: 640px;\r\n    .van-button--primary {\r\n      height: 45px;\r\n      border-radius: 0;\r\n      line-height: 45px;\r\n    }\r\n  }\r\n  .tab-wrap {\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <van-checkbox-group v-model=\"checked\" v-if=\"cid == '0'\" @change=\"checkBoxHandle\">\r\n    <div class=\"ul\" v-for=\"(item, index) in list\" :key=\"item.index\" @click=\"toggle(index)\">\r\n      <div class=\"li title\">\r\n        <van-checkbox :name=\"item.rewordIndex\" :ref=\"el => checkboxRefs[index] = el\" @click.stop>\r\n          <template #icon=\"props\">\r\n            <img class=\"img-icon\" :src=\"props.checked ? activeIcon : inactiveIcon\" />\r\n          </template>\r\n          <div class=\"title\">\r\n            <div class=\"left\">\r\n              推荐分享奖励\r\n            </div>\r\n            <div class=\"right\" style=\"color:#F01C00\">未领取</div>\r\n          </div>\r\n        </van-checkbox>\r\n      </div>\r\n      <div class=\"li\">\r\n        <div class=\"value\"><span class=\"key\">质押地址：</span>{{item.user}}</div>\r\n      </div>\r\n      <div class=\"li\">\r\n        <div class=\"value\"><span class=\"key\">分红数量(ABDX)：</span>{{Number(item.rewardAmount/10**tokenDecimls).toFixed(6)}}</div>\r\n      </div>\r\n      <div class=\"li\">\r\n        <div class=\"value\"><span class=\"key\">待领取数量(ABDX)：</span>{{Number(item.canTake /10**tokenDecimls).toFixed(6)}}</div>\r\n      </div>\r\n      <div class=\"li\">\r\n        <div class=\"value\"><span class=\"key\">已领取数量(ABDX)：</span>{{Number(item.haveTake/10**tokenDecimls).toFixed(6)}}</div>\r\n      </div>\r\n      <div class=\"li\">\r\n        <div class=\"value\"><span class=\"key\">质押时间：</span>{{$dateformat(item.startTime*1000, 'yyyy-mm-dd HH:MM:ss')}}</div>\r\n      </div>\r\n    </div>\r\n  </van-checkbox-group>\r\n  <template v-if=\"cid === '1'\">\r\n    <div class=\"ul done\" v-for=\"item in list\" :key=\"item.id\">\r\n      <div class=\"li\">\r\n        <div class=\"value theme-color\"><span class=\"key\">奖励数量 (ABDX)：</span>{{Number(item.amount/10**tokenDecimls).toFixed(6)}}</div>\r\n        <div class=\"right\" style=\"color:#00A37B\">已领取</div>\r\n      </div>\r\n      <div class=\"li\">\r\n        <div class=\"value\"><span class=\"key\">奖励时间：</span>{{$dateformat(item.time*1000, 'yyyy-mm-dd HH:MM:ss')}}</div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n</template>\r\n<script>\r\nimport { reactive, toRefs, computed, watch } from \"vue\";\r\nimport { useRoute } from 'vue-router'\r\nimport { useI18n } from \"vue-i18n\";\r\nimport config from \"@/utils/config\";\r\nimport tokenAbi from \"@/utils/abi\";\r\nimport investAbi from \"@/utils/investAbi\";\r\nimport { useStore } from \"vuex\";\r\nexport default {\r\n  props: {\r\n    list: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    },\r\n    cid: {\r\n      type: String,\r\n      default: '0'\r\n    }\r\n  },\r\n  setup (props, { emit }) {\r\n    const route = useRoute()\r\n    const store = useStore()\r\n    const { t } = useI18n()\r\n    console.log(props)\r\n    const data = reactive({\r\n      $t: t,\r\n      web3: computed(() => store.state.provider),\r\n      address: computed(() => store.state.accounts[0]),\r\n      abdxContract: null,\r\n      investContract: null,\r\n      tokenDecimls: 10 ** 18,\r\n      activeIcon: require(\"@/assets/images/checkbox_select@2x.png\"),\r\n      inactiveIcon: require(\"@/assets/images/checkbox_default@2x.png\"),\r\n      list: [],\r\n      checkboxRefs: [],\r\n      checked: [],\r\n      toggle: (index) => {\r\n        data.checkboxRefs[index].toggle();\r\n        console.log(data.checked)\r\n      },\r\n      initContract: async () => {\r\n        data.investContract = new data.web3.eth.Contract(investAbi, config.investAddress)\r\n        data.abdxContract = new data.web3.eth.Contract(tokenAbi, config.abdxAddress)\r\n        data.tokenDecimls = await data.abdxContract.methods.decimals().call()\r\n        data.list = props.list\r\n      },\r\n      checkBoxHandle () {\r\n        emit('withdrawCheck', data.checked)\r\n      }\r\n    })\r\n    if (data.address) {\r\n      data.initContract()\r\n    }\r\n    watch(() => data.address, (val) => {\r\n      if (val) {\r\n        data.initContract()\r\n      }\r\n    })\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.theme-color {\r\n  color: #2058e9 !important;\r\n}\r\n.ul {\r\n  margin-bottom: 12px;\r\n  border-radius: 8px;\r\n  background: #fff;\r\n  padding: 16px 13px;\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n  .li {\r\n    display: flex;\r\n    line-height: 1.3;\r\n    padding-bottom: 10.5px;\r\n    &:last-child {\r\n      padding-bottom: 0;\r\n    }\r\n    &.title {\r\n      .van-checkbox {\r\n        width: 100%;\r\n        .van-checkbox__label {\r\n          flex-grow: 1;\r\n        }\r\n      }\r\n      .img-icon {\r\n        width: 19px;\r\n        height: 19px;\r\n        display: block;\r\n      }\r\n    }\r\n\r\n    .key {\r\n      font-size: 14px;\r\n      color: #666;\r\n      flex-shrink: 0;\r\n    }\r\n    .value {\r\n      font-size: 14px;\r\n      color: #111;\r\n      word-break: break-all;\r\n    }\r\n  }\r\n  &.done {\r\n    .li {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      .value {\r\n        flex-grow: 1;\r\n      }\r\n      .right {\r\n        padding-left: 6px;\r\n        flex-shrink: 0;\r\n        font-weight: 700;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n#app {\r\n  .invest {\r\n    .ul {\r\n      .li {\r\n        .van-checkbox__icon {\r\n          flex-shrink: 0;\r\n        }\r\n        .van-checkbox__label {\r\n          flex-grow: 1;\r\n          margin-left: 8.5px;\r\n          .title {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            .left {\r\n              font-size: 15px;\r\n              font-weight: 700;\r\n            }\r\n            .right {\r\n              font-size: 14px;\r\n              font-weight: 700;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./List.vue?vue&type=template&id=6a9c7ae0&scoped=true\"\nimport script from \"./List.vue?vue&type=script&lang=js\"\nexport * from \"./List.vue?vue&type=script&lang=js\"\n\nimport \"./List.vue?vue&type=style&index=0&id=6a9c7ae0&lang=less&scoped=true\"\nimport \"./List.vue?vue&type=style&index=1&id=6a9c7ae0&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-6a9c7ae0\"\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=b7931f8a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=b7931f8a&lang=less&scoped=true\"\nimport \"./index.vue?vue&type=style&index=1&id=b7931f8a&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-b7931f8a\"\n\nexport default script","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAMAAACf4xmcAAAAVFBMVEUAAAAREREQEBAAAAARERERERERERESEhIQEBARERERERESEhIRERERERERERENDQ0REREQEBATExMSEhIREREREREUFBQRERESEhIREREPDw8RERFvr9ybAAAAG3RSTlMAcU0E+u3PDV6o8+nf1i0Tw6o1n4eEJyWgxTOoa1DQAAAA+0lEQVQ4y42U1w7CMAxF7ex0D0bh/v9/IgpCNWob35dK0WmmfUik4zF453wYuaODRG6xSctxB7LsgXpJU29tP6WlBjzbf+oegIfZDFvzAMJdUqZCY+gvpkElBpPDGHd2O8KlzW8OV9rNFe43363ChQ5yQXX7bjYg02EywudgjCYeY7EBr18PQycx8HGdbKDTDOt0Lcw5ZtASdajtOWZrdMRYqJAZTBmphCVkCphK2IRAHn0J6+HJwZYwC6fElIsqj6C9EMasuF7lY+meXllIyrLUFbmyZXQNqGtnIYe8J4cMl/SqkeIapLgGIS6hwTk93xp8plloUCtVpaJfszATJkSrWkwAAAAASUVORK5CYII=\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./List.vue?vue&type=style&index=1&id=6a9c7ae0&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./List.vue?vue&type=style&index=0&id=6a9c7ae0&lang=less&scoped=true\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAMAAACf4xmcAAAAZlBMVEUAAAAdXu8dUv8dXu4dXe4dXu4dXe4dXu0eWeweXe8dXe4dXu4dXu4dXe4dXu0eXu0dXu4cXu4dXe8dXe8cX+4aW/IdXu4dXe4dXu8dX+4cXfAeXu4dXe0dXe8eXe4iZu4dXe0dXu7B47vwAAAAIXRSTlMATQT68u3PJw1v1saooHHp34VfNC0T3MGqRT+ac1yZD0cO88+CAAABSUlEQVQ4y42U6baDIAyEoyx1Reveats77/+Sd0ODVHv4fuhBA2RCGNrRpZNWQig9pR2dkJgMDplJDoLiVAFV2bR9HPdtU1aASmM/6qKBPIqdaVEO6Ms+KpKoI39qVEPuPj4EpuQg2wni4UwTuNIhV4htvYvkqPc4ebHJahR0SgH9LyxFnZyHJTXSv7eCI+f+HIQYnjcncajfVQxyrt4Iy8gVG2F+nhkvdpfYkHdeLiPqUMWsmNkUUlyhoxQlWXK4cC4lDBVo7OgGj1VHg4I0Wjua4THbHy00KfR2NMBjsD96KBJYFQh4iFUDhBMmP4XxptmnTVlCCY+SJTgF+fpUEBNU3sDDCj16WtxGyrcd3UZa3tryNg9CZrPXlmFNHnhlwi5g8HVmcyiOzKFgcwi0GjaucW9cIxtXsA0yr2VvqsuLTujMatFmb9Hfkpg2XIGdj+YAAAAASUVORK5CYII=\""],"sourceRoot":""}